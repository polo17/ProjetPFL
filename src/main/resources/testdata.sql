CREATE TABLE DISCOUNT_CODE (
	DISCOUNT_CODE CHAR(1) NOT NULL,
	RATE DECIMAL(5,3) CONSTRAINT NonNegativeRate CHECK (RATE >= 0.0),
	PRIMARY KEY (DISCOUNT_CODE)
);


CREATE TABLE MANUFACTURER (
	MANUFACTURER_ID INTEGER NOT NULL,
	NAME VARCHAR(30),
	ADDRESSLINE1 VARCHAR(30),
	ADDRESSLINE2 VARCHAR(30),
	CITY VARCHAR(25),
	STATE CHAR(2),
	ZIP CHAR(10),
	PHONE VARCHAR(12),
	FAX VARCHAR(12),
	EMAIL VARCHAR(40),
	REP VARCHAR(30),
	PRIMARY KEY (MANUFACTURER_ID)
);

CREATE TABLE MICRO_MARKET (
	ZIP_CODE VARCHAR(10) NOT NULL,
	RADIUS DOUBLE,
	AREA_LENGTH DOUBLE,
	AREA_WIDTH DOUBLE,
	PRIMARY KEY (ZIP_CODE)
);

CREATE TABLE CUSTOMER (
	CUSTOMER_ID INTEGER NOT NULL,
	DISCOUNT_CODE CHAR(1) NOT NULL,
	ZIP VARCHAR(10) NOT NULL,
	NAME VARCHAR(30),
	ADDRESSLINE1 VARCHAR(30),
	ADDRESSLINE2 VARCHAR(30),
	CITY VARCHAR(25),
	STATE CHAR(2),
	PHONE CHAR(12),
	FAX CHAR(12),
	EMAIL VARCHAR(40),
	CREDIT_LIMIT INTEGER,
	PRIMARY KEY (CUSTOMER_ID)
);

CREATE TABLE PRODUCT_CODE (
	PROD_CODE CHAR(2) NOT NULL,
	DISCOUNT_CODE CHAR(1) NOT NULL,
	DESCRIPTION VARCHAR(10),
	PRIMARY KEY (PROD_CODE)
);

CREATE TABLE PRODUCT (
	PRODUCT_ID INTEGER NOT NULL,
	MANUFACTURER_ID INTEGER NOT NULL,
	PRODUCT_CODE CHAR(2) NOT NULL,
	PURCHASE_COST DECIMAL(12,2),
	QUANTITY_ON_HAND INTEGER,
	MARKUP DECIMAL(4,2),
	AVAILABLE VARCHAR(5),
	DESCRIPTION VARCHAR(50),
	PRIMARY KEY (PRODUCT_ID)
);


CREATE TABLE PURCHASE_ORDER (
	ORDER_NUM INTEGER NOT NULL,
	CUSTOMER_ID INTEGER NOT NULL,
	PRODUCT_ID INTEGER NOT NULL,
	QUANTITY SMALLINT,
	SHIPPING_COST DECIMAL(12,2),
	SALES_DATE DATE,
	SHIPPING_DATE DATE,
	FREIGHT_COMPANY VARCHAR(30),
	PRIMARY KEY (ORDER_NUM)
);

INSERT INTO CUSTOMER(CUSTOMER_ID, DISCOUNT_CODE, ZIP, NAME, ADDRESSLINE1, ADDRESSLINE2, CITY, STATE, PHONE, FAX, EMAIL, CREDIT_LIMIT) VALUES 
(1, 'N', '95117', 'Jumbo Eagle Corp', '111 E. Las Olivas Blvd', 'Suite 51', 'Fort Lauderdale', 'FL', '305-555-0188', '305-555-0189', 'jumboeagle@example.com', 100000),
(2, 'M', '95035', 'New Enterprises', '9754 Main Street', 'P.O. Box 567', 'Miami', 'FL', '305-555-0148', '305-555-0149', 'www.new.example.com', 50000);
INSERT INTO DISCOUNT_CODE(DISCOUNT_CODE, RATE) VALUES ('H', 16.00),('M', 11.00),('L', 7.00),('N', 0.00);
INSERT INTO MANUFACTURER(MANUFACTURER_ID, NAME, ADDRESSLINE1, ADDRESSLINE2, CITY, STATE, ZIP, PHONE, FAX, EMAIL, REP) VALUES 
(19985678, 'Happy End Searching', '5 81st Street', 'Suite 100', 'Mountain View', 'CA', '94043', '650-555-0102', '408-555-0103', 'happysearching@example.com', 'John Snow'),
(19986982, 'Smith Bird Watching', '4000 Finch Circle', 'Building 14', 'Santa Clara', 'CA', '95051', '650-555-0111', '408-555-0112', 'www.sbw@example.com', 'Brian Washington');
INSERT INTO MICRO_MARKET(ZIP_CODE, RADIUS, AREA_LENGTH, AREA_WIDTH) VALUES 
('95051', 255.59, 689.856, 478.479),
('94043', 157.869, 385.821, 147.538),
('85638', 758.648, 328.963, 482.164);
INSERT INTO PRODUCT(PRODUCT_ID, MANUFACTURER_ID, PRODUCT_CODE, PURCHASE_COST, QUANTITY_ON_HAND, MARKUP, AVAILABLE, DESCRIPTION) VALUES 
(980001, 19985678, 'SW', 1095.00, 800000, 8.25, 'TRUE', 'Identity Server'),
(980005, 19986982, 'SW', 11500.99, 500, 55.25, 'TRUE', 'Accounting Application'),
(980025, 19974892, 'HW', 2095.99, 3000, 15.75, 'TRUE', '1Ghz Sun Blade Computer')
INSERT INTO PRODUCT_CODE(PROD_CODE, DISCOUNT_CODE, DESCRIPTION) VALUES 
('SW', 'M', 'Software')
,('HW', 'H', 'Hardware')
,('FW', 'L', 'Firmware');
INSERT INTO PURCHASE_ORDER(ORDER_NUM, CUSTOMER_ID, PRODUCT_ID, QUANTITY, SHIPPING_COST, SALES_DATE, SHIPPING_DATE, FREIGHT_COMPANY) VALUES 
(10398001, 1, 980001, 10, 449.00, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398002, 2, 980005, 8, 359.99, '2011-05-24', '2012-05-24', 'Poney Express'),
(10398003, 2, 980025, 25, 275.00, '2011-05-24', '2011-01-24', 'Poney Express');


ALTER TABLE CUSTOMER
	ADD FOREIGN KEY (DISCOUNT_CODE) 
	REFERENCES DISCOUNT_CODE (DISCOUNT_CODE);

ALTER TABLE CUSTOMER
	ADD FOREIGN KEY (ZIP) 
	REFERENCES MICRO_MARKET (ZIP_CODE);

ALTER TABLE PRODUCT
	ADD FOREIGN KEY (MANUFACTURER_ID) 
	REFERENCES MANUFACTURER (MANUFACTURER_ID);

ALTER TABLE PRODUCT
	ADD FOREIGN KEY (PRODUCT_CODE) 
	REFERENCES PRODUCT_CODE (PROD_CODE);

ALTER TABLE PURCHASE_ORDER
	ADD FOREIGN KEY (CUSTOMER_ID) 
	REFERENCES CUSTOMER (CUSTOMER_ID);

ALTER TABLE PURCHASE_ORDER
	ADD FOREIGN KEY (PRODUCT_ID) 
	REFERENCES PRODUCT (PRODUCT_ID);


